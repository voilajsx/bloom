import{j as e,f as E,u as L,d as w,b as R,o as G,g as J}from"./uikit-BDBZh0oh.js";import{r as l}from"./router-Dk50FOzW.js";import{u as B}from"./useBloomStorage-B1Aq2Cr9.js";import{a as F,d as M,Q as W}from"./index-UunlnGXq.js";import"./vendor-DJG_os-6.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],V=F("book-open",U);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],z=F("heart",Z);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O=F("loader-circle",K);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Y=F("refresh-cw",X);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],te=F("share-2",ee),T=new Map;function se(){const[a,n]=l.useState(!1),[m,h]=l.useState(null),g=l.useCallback(()=>{T.clear()},[]),x=l.useCallback(i=>{const c=T.get(i);return c&&Date.now()<c.expiry?{success:!0,data:c.data,cached:!0}:(c&&T.delete(i),null)},[]),v=l.useCallback((i,c,j)=>{T.set(i,{data:c,timestamp:Date.now(),expiry:Date.now()+j})},[]),r=l.useCallback(async(i,c={})=>{var q;const{timeout:j=M["api-timeout"],enableCache:C=M["enable-caching"]!==!1,cacheTime:I=3e5,headers:Q={},retries:A=3,...N}=c,$=!N.method||N.method==="GET"?`${i}_${JSON.stringify({headers:Q,...N})}`:"";if(C&&$){const y=x($);if(y)return y}n(!0),h(null);for(let y=1;y<=A;y++)try{const p=new AbortController,b=setTimeout(()=>p.abort(),j),t={"Content-Type":"application/json",...Q},s=await fetch(i,{...N,headers:t,signal:p.signal});clearTimeout(b);let o;const f=s.headers.get("content-type")||"";if(f.includes("application/json")?o=await s.json():f.includes("text/")?o=await s.text():o=await s.blob(),s.ok)return C&&$&&v($,o,I),n(!1),{success:!0,data:o,status:s.status,cached:!1};throw new Error(`HTTP ${s.status}: ${s.statusText}`)}catch(p){if(console.error(`[API] Attempt ${y} failed:`,p),p.name==="AbortError"||(q=p.message)!=null&&q.includes("HTTP 4"))break;if(y===A){const b=p.name==="AbortError"?"Request timed out":p.message||"Network request failed";return h(b),n(!1),{success:!1,error:b,status:0}}await new Promise(b=>setTimeout(b,Math.pow(2,y)*1e3))}return n(!1),{success:!1,error:"Request failed after all retries"}},[x,v]),d=l.useCallback((i,c={})=>r(i,{...c,method:"GET"}),[r]),u=l.useCallback((i,c,j={})=>r(i,{...j,method:"POST",body:c?JSON.stringify(c):void 0}),[r]),k=l.useCallback((i,c,j={})=>r(i,{...j,method:"PUT",body:c?JSON.stringify(c):void 0}),[r]),P=l.useCallback((i,c={})=>r(i,{...c,method:"DELETE"}),[r]);return{loading:a,error:m,apiCall:r,apiGet:d,apiPost:u,apiPut:k,apiDelete:P,clearCache:g,clearError:()=>h(null),isOnline:typeof navigator<"u"?navigator.onLine:!0}}function ae(){const{get:a,set:n}=B(),{apiGet:m}=se(),[h,g]=l.useState([]),[x,v]=l.useState(null),[r,d]=l.useState([]),[u,k]=l.useState({autoRefresh:!0,refreshInterval:3e4,showAuthor:!0,quotesPerPage:6}),[P,i]=l.useState({quotes:!1,featured:!1,refresh:!1}),[c,j]=l.useState(null);l.useEffect(()=>{C(),I(),Q(),A()},[]),l.useEffect(()=>{if(!u.autoRefresh)return;const t=setInterval(()=>{N()},u.refreshInterval);return()=>clearInterval(t)},[u.autoRefresh,u.refreshInterval]);const C=async()=>{try{const t=await a("quotes.autoRefresh",!0),s=await a("quotes.refreshInterval",3e4),o=await a("quotes.showAuthor",!0),f=await a("quotes.quotesPerPage",6);k({autoRefresh:t,refreshInterval:s,showAuthor:o,quotesPerPage:f})}catch(t){console.error("[Quotes] Failed to load settings:",t)}},I=async()=>{try{const t=await a("quotes.favorites",[]);d(t)}catch(t){console.error("[Quotes] Failed to load favorites:",t)}},Q=async()=>{i(t=>({...t,quotes:!0})),j(null);try{console.log("[Quotes] Loading advice from Advice Slip API...");const t=Array(u.quotesPerPage).fill(null).map((f,_)=>m("https://api.adviceslip.com/advice").then(S=>({response:S,index:_}))),s=await Promise.all(t),o=[];if(s.forEach(({response:f,index:_})=>{var S;if(f.success&&((S=f.data)!=null&&S.slip)){const D=f.data.slip;o.push({id:`advice-${D.id}-${Date.now()}-${_}`,content:D.advice,author:"Anonymous Wisdom",tags:["advice","wisdom"],length:D.advice.length})}}),o.length>0)g(o),console.log("[Quotes] Advice Slip API successful!",o);else throw new Error("No advice received from API")}catch(t){console.error("[Quotes] Advice Slip API failed:",t),j("Failed to load advice from API. Please try refreshing.")}finally{i(t=>({...t,quotes:!1}))}},A=async()=>{var t;i(s=>({...s,featured:!0}));try{console.log("[Quotes] Loading featured advice...");const s=await m("https://api.adviceslip.com/advice");if(s.success&&((t=s.data)!=null&&t.slip)){const o=s.data.slip,f={id:`featured-advice-${o.id}-${Date.now()}`,content:o.advice,author:"Featured Wisdom",tags:["featured","advice"],length:o.advice.length};v(f),console.log("[Quotes] Featured advice loaded:",f)}else throw new Error("No featured advice received")}catch(s){console.error("[Quotes] Failed to load featured advice:",s)}finally{i(s=>({...s,featured:!1}))}},N=l.useCallback(async()=>{i(t=>({...t,refresh:!0}));try{await Promise.all([Q(),A()])}finally{i(t=>({...t,refresh:!1}))}},[u.quotesPerPage]),$=async(t,s)=>{try{k(o=>({...o,[t]:s})),await n(`quotes.${t}`,s),t==="quotesPerPage"&&Q()}catch(o){console.error(`[Quotes] Failed to update ${t}:`,o),k(f=>({...f,[t]:u[t]}))}},q=async t=>{try{const s=r.includes(t)?r.filter(o=>o!==t):[...r,t];d(s),await n("quotes.favorites",s)}catch(s){console.error("[Quotes] Failed to update favorites:",s)}},y=async t=>{const s=`"${t.content}" — ${t.author}`;if(navigator.share)try{await navigator.share({title:"Inspirational Advice",text:s,url:window.location.href})}catch{p(s)}else p(s)},p=async t=>{try{await navigator.clipboard.writeText(t),console.log("Advice copied to clipboard")}catch(s){console.error("Failed to copy to clipboard:",s)}};return{quotes:h,featuredQuote:x,favorites:r,settings:u,loading:P,error:c,refreshQuotes:N,updateSetting:$,toggleFavorite:q,shareQuote:y,getFavorites:()=>h.filter(t=>r.includes(t.id)),isReady:!P.quotes&&!P.featured}}function H({quote:a,featured:n=!1,showAuthor:m=!0,onFavorite:h,onShare:g,isFavorited:x=!1,className:v=""}){const r=n?"border-primary bg-gradient-to-br from-primary/5 to-accent/5":"hover:shadow-md transition-shadow duration-200";return e.jsx(E,{className:`${r} ${v}`,children:e.jsxs(L,{className:`p-6 ${n?"md:p-8":""}`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(W,{className:`${n?"w-8 h-8":"w-6 h-6"} text-primary/60`})}),e.jsx("blockquote",{className:`text-center mb-6 ${n?"text-xl md:text-2xl":"text-lg"} leading-relaxed`,children:e.jsxs("p",{className:"text-foreground font-medium italic",children:['"',a.content,'"']})}),m&&e.jsx("div",{className:"text-center mb-6",children:e.jsxs("p",{className:`text-muted-foreground ${n?"text-lg":"text-base"}`,children:["— ",a.author]})}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:a.tags.slice(0,3).map((d,u)=>e.jsx(w,{variant:"secondary",className:"text-xs",children:d},u))}),e.jsxs("div",{className:"flex justify-center gap-3",children:[h&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:h,className:`${x?"text-red-500 hover:text-red-600":"text-muted-foreground"}`,children:[e.jsx(z,{className:`w-4 h-4 mr-2 ${x?"fill-current":""}`}),x?"Favorited":"Favorite"]}),g&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:g,className:"text-muted-foreground",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Share"]})]}),n&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(w,{className:"bg-primary/10 text-primary border-primary/20",children:"✨ Featured Quote"})}),a.length&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs(w,{variant:"outline",className:"text-xs",children:[a.length," characters"]})})]})})}function re({quotes:a,loading:n=!1,showAuthor:m=!0,onFavorite:h,onShare:g,favoriteIds:x=[],emptyMessage:v="No quotes available",className:r=""}){return n?e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${r}`,children:Array.from({length:6}).map((d,u)=>e.jsx(E,{className:"animate-pulse",children:e.jsxs(L,{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-6 h-6 bg-muted rounded"})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/5 mx-auto"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/5 mx-auto"})]}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto mb-6"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-20"}),e.jsx("div",{className:"h-8 bg-muted rounded w-20"})]})]})},u))}):!n&&a.length===0?e.jsx("div",{className:`text-center py-12 ${r}`,children:e.jsx(E,{children:e.jsxs(L,{className:"p-12",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No Quotes Found"}),e.jsx("p",{className:"text-muted-foreground",children:v})]})})}):e.jsxs("div",{className:r,children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(w,{variant:"outline",children:[a.length," quotes"]}),x.length>0&&e.jsxs(w,{variant:"secondary",children:[x.length," favorites"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((d,u)=>e.jsx("div",{className:"animate-bloom-fade-in",style:{animationDelay:`${u*.1}s`},children:e.jsx(H,{quote:d,showAuthor:m,onFavorite:h?()=>h(d.id):void 0,onShare:g?()=>g(d):void 0,isFavorited:x.includes(d.id)})},d.id))}),a.length>0&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs(w,{variant:"outline",className:"text-xs",children:["Showing ",a.length," quotes"]})})]})}function de(){const{quotes:a,featuredQuote:n,loading:m,error:h,settings:g,refreshQuotes:x,getFavorites:v,toggleFavorite:r,shareQuote:d}=ae();return e.jsxs("div",{className:"space-y-16",children:[e.jsxs("section",{className:"py-16 px-8 text-center border-b border-border",children:[e.jsx(w,{variant:"secondary",className:"mb-6",children:"🌸 Daily Inspiration"}),e.jsx("h1",{className:"text-5xl font-bold mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Quotes"})}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Discover wisdom and inspiration from great minds throughout history. Let these quotes motivate and guide your journey."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e.jsx(R,{onClick:x,disabled:m.quotes,variant:"outline",className:"min-w-32",children:m.quotes?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"New Quotes"]})}),e.jsxs(R,{onClick:()=>window.location.href="#favorites",variant:"ghost",className:"min-w-32",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Favorites (",v().length,")"]})]})]}),h&&e.jsx("div",{className:"max-w-4xl mx-auto px-8 py-8",children:e.jsx(G,{variant:"destructive",children:e.jsxs(J,{children:[h,". Please try refreshing the page."]})})}),n&&!m.featured&&e.jsx("section",{className:"py-16 px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Quote of the Day"}),e.jsx(H,{quote:n,featured:!0,onFavorite:()=>r(n.id),onShare:()=>d(n),showAuthor:g.showAuthor})]})}),m.featured&&e.jsx("section",{className:"py-16 px-8",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsx(E,{children:e.jsxs(L,{className:"p-12",children:[e.jsx(O,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading featured quote..."})]})})})}),e.jsx("section",{className:"py-16 px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Latest Quotes"}),e.jsxs(w,{variant:"outline",children:[a.length," quotes loaded"]})]}),e.jsx(re,{quotes:a,loading:m.quotes,onFavorite:r,onShare:d,showAuthor:g.showAuthor,emptyMessage:"No quotes available. Try refreshing to load new quotes."})]})}),g.autoRefresh&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx(w,{variant:"secondary",className:"text-xs",children:"Auto-refresh enabled"})})]})}export{de as default};
